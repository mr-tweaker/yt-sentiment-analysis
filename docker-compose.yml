version: '3.8'

services:
  youtube-sentiment:
    image: your-registry/youtube-sentiment-analysis:latest
    container_name: youtube-sentiment-analysis
    ports:
      - "8501:8501"
    environment:
      # Set your YouTube API key here or use .env file
      - YOUTUBE_API_KEY=${YOUTUBE_API_KEY:-}
    volumes:
      # Persist databases and output
      - ./output:/app/output
      # Optional: Mount data directory if you have CSV files
      # - ./data:/app/data:ro
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "python", "-c", "import socket; s=socket.socket(); s.connect(('localhost', 8501)); s.close()"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 10s
